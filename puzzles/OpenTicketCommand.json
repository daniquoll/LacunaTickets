{"id":"1174430366518480946","options":[],"components":[{"type":"ACTION","action":{"type":"EXECUTE_CODE","execute_code":{"code":"const tickets = await getValue(`tickets.${channel.id}`) ?? []\r\nconst ticket = tickets.filter(v => v.status === 'OPENED' && v.user_id === member.user.id).at(-1)\r\n\r\nif (ticket) {\r\n  await reply({\r\n    content: `${member.user.username}, —É –≤–∞—Å –∏–º–µ–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ: <#${ticket.id}>`,\r\n    ephemeral: true\r\n  })\r\n\r\n  return\r\n}\r\n\r\nawait deferReply({ ephemeral: true })\r\n\r\nconst description = command.options.find(v => v.name === '–æ–ø–∏—Å–∞–Ω–∏–µ')?.value\r\nconst thread = await createThread(channel.id, {\r\n  name: `–û–±—Ä–∞—â–µ–Ω–∏–µ #${tickets.length + 1} –æ—Ç ${member.user.username}`\r\n})\r\n\r\nawait sendMessage(thread.id, {\r\n  content: description,\r\n  components: [\r\n    [\r\n      {\r\n        type: 'Button',\r\n        customId: 'close-ticket',\r\n        label: '–ó–∞–∫—Ä—ã—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ',\r\n        emoji: { name: 'üîí' },\r\n        style: 'Secondary'\r\n      }\r\n    ]\r\n  ]\r\n})\r\ntickets.push({\r\n  id: thread.id,\r\n  user_id: member.user.id,\r\n  status: 'OPENED',\r\n  description\r\n})\r\nsetValue(`tickets.${channel.id}`, tickets)\r\nawait deleteReply()"}}}],"command":{"type":1,"name":"open-ticket","description":"–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ","options":[{"type":3,"name":"–æ–ø–∏—Å–∞–Ω–∏–µ","description":"–ß–µ–º –º—ã –º–æ–∂–µ–º –ø–æ–º–æ—á—å –≤–∞–º?","required":true,"choices":[]}]},"throttling":null}